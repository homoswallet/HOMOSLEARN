
<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Synra — دردشة</title>
  <style>
    body{font-family: system-ui, sans-serif; margin:0; background:#0f172a; color:#fff;}
    header{padding:16px 20px; background:#111827; position:sticky; top:0;}
    .wrap{max-width:820px; margin:0 auto; padding:20px;}
    .bubble{padding:12px 14px; border-radius:12px; margin:8px 0; max-width: 75%; line-height:1.6}
    .you{background:#1f2937; margin-left:auto; border-top-left-radius:4px}
    .ai{background:#0ea5e9; color:#00111a; margin-right:auto; border-top-right-radius:4px}
    form{display:flex; gap:8px; position:sticky; bottom:0; background:#0f172a; padding:10px 0;}
    input, button{font-size:16px; padding:10px;}
    input{flex:1; border-radius:8px; border:1px solid #1f2937; background:#0b1220; color:#fff}
    button{border-radius:8px; border:0; background:#22d3ee; color:#00333a; font-weight:700; cursor:pointer}
    .muted{opacity:.7; font-size:12px}
  </style>
</head>
<body>
  <header><strong>SYNRA</strong> — مساعد ذكي صغير لسه بيتعلم ✨</header>
  <div class="wrap">
    <div id="chat"></div>
    <form id="f">
      <input id="t" placeholder="اكتب رسالتك..." autocomplete="off" />
      <button>إرسال</button>
    </form>
    <p class="muted">نصيحة: جرب تسأل بالعربي أو الإنجليزي — Synra يحاول يطابق لغتك.</p>
  </div>
  <script>
    const chat = document.getElementById('chat');
    const form = document.getElementById('f');
    const input = document.getElementById('t');
    let session_id = null;

    function addBubble(text, cls){
      const div = document.createElement('div');
      div.className = 'bubble ' + cls;
      div.textContent = text;
      chat.appendChild(div);
      window.scrollTo(0, document.body.scrollHeight);
    }

    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      const text = input.value.trim();
      if(!text) return;
      addBubble(text, 'you'); input.value='';
      const resp = await fetch('/chat', {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify({ text, session_id })
      });
      const data = await resp.json();
      session_id = data.session_id;
      addBubble(data.reply, 'ai');
    });
  </script>
</body>
</html>
